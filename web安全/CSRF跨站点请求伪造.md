## 跨站点请求伪造（Cross-site request forgery）
### 定义
对在站点上已完成认证的用户（如）进行非预期的个人信息或者某些状态的更改操作。

### 例子

- 论坛上留言

    1. 攻击者通过论坛留言功能设下恶意代码,如下
        
        http//example.com/msg?q=你好（直接形式）
        
        <img src="http//example.com/msg?q=你好">（前提存在XSS漏洞）
    2. 傻白甜不小心点击了这条留言，发送了这条请求给服务器（同时携带了傻白甜的已认证的cookie信息），服务器处理为傻白甜留言了。
    
    3. 实际上傻白甜并没有留言行为却发生了

- 购物行为

    1. 傻白甜登录某宝进行购物，已经登录了。
    
    2. 傻白甜在没有退出某宝的情况下，由于各种原因，访问了攻击者网站，然后触发该攻击者网站向某宝发送购买商品A的请求，某宝服务器受理为傻白甜的行为。执行了购买该商品的请求。
    
    3. 傻白甜毫不知情的情况下购买了商品A


### 防御措施

1. 对于表单提交或者某类更新数据库行为加入验证码功能。【坏处：用户体验】
2. 设token值，服务端生成token值，客户端每次请求传参携带该token值，与服务端保存的值进行匹配，正确则允许，然后可以再更新token值，【Fix：不影响用户体验】
3. Referer值或者Origin值判断：根据请求首部字段里的referer值可以知道该请求是从哪个URL发起的，若不是允许的访问域名，拒绝。
